# Postgres Database Schema

For cell-level cycle data, there are five tables for li-on and five for flow batteries. There is one table for stack metadata and one for module metadata. See the table descriptions below.

## Table: Cell Metadata
### Purpose: Contains metadata pertaining to li-ion cells.
| Column      | Data Type | Description | Units | Options |
| ----------- | --------- | ----------- | ----- | ------- |
| index       | integer | generated by PG when adding rows to database |
| cell_id     | text    | unique id for each cell |
| anode       | text    | anode material |
| cathode     | text    | cathode material |
| source      | text    | acronym for organization associated with the data |
| ah          | integer | cell energy capacity | ah |
| form_factor | text    | cell form |
| test        | text    | select between cycle or abuse data |
| tester      | text    | select which file format the data is || matlab, csv, arbin, json, voltaiq |
| status      | text    | status of import | |new, buffering, processing, completed |
| parent_id   | text    | if the cell is part of a module, the unique module id goes here |

## Table: Cycle Metadata
### Purpose: Contains metadata pertaining to li-ion cycles. 
| Column      | Data Type | Description | Units |
| ----------- | --------- | ----------- | :-----:|
| index       | integer          | generated by PG when adding rows to database |
| temperature | double precision | cell temperature | °C |
| soc_max     | double precision | maximum state of charge |
| soc_min     | double precision | mimumum state of charge |
| v_max       | double precision | maximum voltage | V |
| v_min       | double precision | minimum voltage| V |
| crate_c     | double precision | charge c-rate |
| crate_d     | double precision | discharge c-rate |
| cell_id     | text             | unique id for each cell |
| step        | integer          | factor by which to reduce the number of data points in slow-to-load plots |

## Table: Cycle Stats
### Purpose: Contains statistics for each li-ion cycle.
| Column          | Data Type        | Description | Units |
| --------------- | ---------------- | ----------- | :---: |
| index           | integer          | generated by PG when adding rows to the database |
| v_max           | double precision | maximum voltage in the cycle | V |
| v_min           | double precision | minimum voltage in the cycle | V |
| ah_c            | double precision | amount of energy charged in the cycle | Ah |
| ah_d            | double precision | amount of energy discharged in the cycle | Ah |
| e_c             | double precision | amount of energy charged in the cycle | Wh |
| e_d             | double precision | amount of energy discharged in the cycle | Wh |
| i_max           | double precision | maximum current in the cycle| A |
| i_min           | double precision | minimum current in the cycle| A |
| v_c_mean        | double precision | average voltage during charge | V |
| v_d_mean        | double precision | average voltage during discharge | V |
| e_eff           | double precision | effective energy | Wh |
| ah_eff          | double precision | effective energy | Ah |
| cycle_index     | integer          | cycle number |
| test_time       | double precision | time cycle was performed | s
| cell_id         | text             | unique id for each cell |
| component_level | text             | denotes whether row corresponds to a 'cell' or 'module' |

## Table: Cycle Timeseries and Cycle Timeseries Buffer$^{*}$ 
### Purpose: Contains li-ion timeseries data. 
*The buffer table is identical to the timeseries table except with a sheetname column to note the sheetname if there are multiple sheets in a data file. See the code documentation for more information.
| Column           | Data Type        | Description | Units |
| ---------------- | ---------------- | ----------- | ----- |
| index            | integer          | generated by PG when adding rows to the database |
| i                | double precision | current | A |
| v                | double precision | voltage | V |
| ah_c             | double precision | charge energy | Ah |
| ah_d             | double precision | discharge energy | Ah |
| e_c              | double precision | charge energy | Wh |
| e_d              | double precision | discharge energy | Wh |
| env_temperature  | double precision | environment temperature | °C |
| cell_temperature | double precision | cell temperature | °C |
| cycle_time       | double precision | 
| date_time        | timestamp without time zone | timestamp |
| cycle_index      | integer | cycle number |
| test_time        | double precision | time measurement was taken | s |
| cell_id          | text          | unique id for each cell |
| is_load_balanced | boolean |
| component_level  | text | denotes whether row corresponds to a 'cell' or 'module' |

## Table: Flow Cell Metadata
### Purpose: Contains cell metadata for flow cells.
| Column           | Data Type        | Description | Units | Options |
| ---------------- | ---------------- | ----------- | ----- | ------- |
| index            | integer          | generated by PG when adding rows to the database |
| cell_id          | text | unique id for each cell
| flow_pattern     | text | shape of flow channels |
| ne_material      | text | material of the negolyte |
| pe_material      | text | material of the posolyte |
| membrane         | text | membrane material |
| membrane_size    | real | membrane area | cm^2 |
| ne_active        | text | active ions in negolyte |
| initial_ne_active| real | initial amount of active negolyte | M |
| pe_active        | text | active ions in posolyte |
| initial_ne_active| real | initial amount of active posolyte | M |
| ne_volume        | real | negolyte volume | L |
| pe_volume        | real | posolyte volume | L |
| flow_rate        | real | rate of flow | L/min |
| test_type        | real | type of flow test |
| tester           | text | select which file format the data is | | matlab, csv, arbin, json, voltaiq |
| test             | text | select between cycle or abuse data |
| status           | text | status of import | | new, buffering, processing, completed |
| parent_id        | text | if the cell is part of a stack, the unique stack id goes here |

## Table: Flow Cycle Metadata 
### Purpose: Contains cycle metadata for flow cells.
| Column           | Data Type        | Description | Options |
| ---------------- | ---------------- | ----------- | ------- |
| index            | integer          | generated by PG when adding rows to database |
| cell_id          | text             | unique id for each cell |
| step             | text             | factor by which to reduce the number of data points in slow-to-load plots | 1,10,100... |

## Table: Flow Cycle Stats 
### Purpose: Contains cycle statistics for flow cells. Has the same columns as li-on cycle stats, but with a few additional colmuns.
| Column           | Data Type        | Description | Options |
| ---------------- | ---------------- | ----------- | ------- |
| same as li-on    |           |
| e_c_cmltv        | double precision             | cumulative charging energy |
| e_d_cmltv        | double precision             | cumulative discharge energy |
| e_eff_cmltv      | double precision             | cumulative effective energy |

## Table: Flow Cycle Timeseries and Flow Cycle Timeseries Buffer$^{*}$ 
### Purpose: Contains li-ion timeseries data. 
*The buffer table is identical to the timeseries table except with a sheetname column to note the sheetname if there are multiple sheets in a data file. See the code documentation for more information.
| Column           | Data Type        | Description | Units |
| ---------------- | ---------------- | ----------- | ----- |
| index            | integer          | generated by PG when adding rows to database |
| i                | double precision | current | A |
| v                | double precision | voltage | V |
| ah_c             | double precision | charge capacity | Ah |
| ah_d             | double precision | discharge capacity | Ah |
| e_c              | double precision | charge energy | Wh |
| e_d              | double precision | discharge energy | Wh |
| env_temperature  | double precision | environment temperature | °C|
| cell_temperature | double precision | cell temperature | °C |
| cycle_time       | double precision | 
| date_time        | timestamp without time zone | timestamp |
| cycle_index      | integer | number of the cycle |
| test_time        | double precision | timestamp | s |
| cell_id          | text          | unique id for each cell |
| w | double_precision | power | W |
| component_level  | text | denotes whether row corresponds to a 'cell' or 'stack' |

## Table: Module Metadata 
### Purpose: Contains metadata for li-ion modules.
| Column           | Data Type        | Description | Options |
| ---------------- | ---------------- | ----------- | ------- |
| index            | integer          | generated by PG when adding rows to database |
| module_id        | text             | unique id for each module |
| configuration    | text             | parallel 'P' or series 'S' configuration |
| num_parallel     | integer          | number of parallel cells |
| num_series       | integer          | number of series cells |
| status           | text             | status of import | new, buffering, processing, completed |

## Table: Stack Metadata 
### Purpose: Contains metadata for flow stacks.
| Column           | Data Type        | Description | Options |
| ---------------- | ---------------- | ----------- | ------- |
| index            | integer          | generated by PG when adding rows to database |
| stack_id         | text             | unique id for each stack | 
| num_series       | integer          | number of cells in the stack |
| status           | text             | status of import | new, buffering, processing, completed |


```python

```
