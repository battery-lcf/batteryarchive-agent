# Postgres Database Schema

For cell-level cycle data, there are five tables for li-on and five for flow batteries. There is one table for stack metadata and one for module metadata. See the table descriptions below.

## Table: Cell Metadata
### Purpose: Contains metadata pertaining to li-ion cells.
| Column      | Data Type | Description | Units | Options |
| ----------- | --------- | ----------- | ----- | ------- |
| index       | integer | generated by PG when adding rows to database |
| cell_id     | text    | unique id for each cell |
| anode       | text    | anode material |
| cathode     | text    | cathode material |
| source      | text    | acronym for organization associated with the data |
| ah          | integer | | ah |
| form_factor | text    | cell form |
| test        | text    | select between cycle or abuse data |
| tester      | text    | select which file format the data is || matlab, csv, arbin, json, voltaiq |
| status      | text    | status of import | |new, buffering, processing, completed |
| weight      | text    | 
| dimensions  | text    |
| parent_id   | text    | if the cell is part of a module, the unique module id goes here |

## Table: Cycle Metadata
### Purpose: Contains metadata pertaining to li-ion cycles. 
| Column      | Data Type | Description | Units |
| ----------- | --------- | ----------- | :-----:|
| index       | integer          | generated by PG when adding rows to database |
| temperature | double precision | |
| soc_max     | double precision | |
| soc_min     | double precision | |
| v_max       | double precision | | V |
| v_min       | double precision | | V |
| crate_c     | double precision | |
| crate_d     | double precision | |
| cell_id     | text             | unique id for each cell |
| step        | integer          | factor by which to reduce the number of data points in slow-to-load plots |

## Table: Cycle Stats
### Purpose: Contains statistics for each li-ion cycle.
| Column          | Data Type        | Description | Units |
| --------------- | ---------------- | ----------- | :---: |
| index           | integer          | generated by PG when adding rows to the database |
| v_max           | double precision | maximum voltage in the cycle | V |
| v_min           | double precision | minimum voltage in the cycle | V |
| ah_c            | double precision | amount of energy charged in the cycle | ah |
| ah_d            | double precision | amount of energy discharged in the cycle | ah |
| e_c             | double precision | charge energy |
| e_d             | double precision | discharge energy |
| i_max           | double precision | maximum current in the cycle| A |
| i_min           | double precision | minimum current in the cycle| A |
| v_c_mean        | double precision | average voltage during charge | V |
| v_d_mean        | double precision | average voltage during discharge | V |
| e_eff           | double precision | effective energy | 
| ah_eff          | double precision | effective energy | ah 
| cycle_index     | integer          | cycle number |
| test_time       | double precision | time cycle was performed | s
| cell_id         | text             | unique id for each cell |
| component_level | text             | denotes whether row corresponds to a 'cell' or 'module' |

## Table: Cycle Timeseries and Cycle Timeseries Buffer$^{*}$ 
### Purpose: Contains li-ion timeseries data. 
*The buffer table is identical to the timeseries table except with a sheetname column to note the sheetname if there are multiple sheets in a data file. See the code documentation for more information.
| Column           | Data Type        | Description |
| ---------------- | ---------------- | ----------- |
| index            | integer          | 
| i                | double precision |
| v                | double precision |
| ah_c             | double precision |
| ah_d             | double precision |
| e_c              | double precision |
| e_d              | double precision |
| env_temperature  | double precision |
| cell_temperature | double precision |
| cycle_time       | double precision |
| date_time        | timestamp without time zone |
| cycle_index      | integer |
| test_time        | double precision |
| cell_id          | text          | unique id for each cell |
| is_load_balanced | boolean |
| component_level  | text | denotes whether row corresponds to a 'cell' or 'module' |

## Table: Flow Cell Metadata
### Purpose: Contains cell metadata for flow cells.
| Column           | Data Type        | Description | Options |
| ---------------- | ---------------- | ----------- | ------- |
| index            | integer          | 
| cell_id          | text |
| flow_pattern     | text |
| ne_material      | text |
| pe_material      | text |
| membrane         | text |
| membrane_size    | real |
| ne_active        | text |
| initial_ne_active| real |
| pe_active        | text |
| initial_ne_active| real |
| ne_volume        | real |
| pe_volume        | real |
| flow_rate        | real |
| test_type        | real |
| tester           | text |
| test             | text |
| status           | text | status of import | new, buffering, processing, completed |
| parent_id        | text |

## Table: Flow Cycle Metadata 
### Purpose: Contains cycle metadata for flow cells.
| Column           | Data Type        | Description | Options |
| ---------------- | ---------------- | ----------- | ------- |
| index            | integer          | generated by PG when adding rows to database |
| cell_id          | text             | unique id for each cell |
| step             | text             | factor by which to reduce the number of data points in slow-to-load plots | 1,10,100... |

## Table: Flow Cycle Stats 
### Purpose: Contains cycle statistics for flow cells. Has the same columns as li-on cycle stats, but with a few additional colmuns.
| Column           | Data Type        | Description | Options |
| ---------------- | ---------------- | ----------- | ------- |
| same as li-on    |           |
| e_c_cmltv        | double precision             | cumulative charging energy |
| e_d_cmltv        | double precision             | cumulative discharge energy |
| e_eff_cmltv      | double precision             | cumulative effective energy |

## Table: Flow Cycle Timeseries and Flow Cycle Timeseries Buffer$^{*}$ 
### Purpose: Contains li-ion timeseries data. 
*The buffer table is identical to the timeseries table except with a sheetname column to note the sheetname if there are multiple sheets in a data file. See the code documentation for more information.
| Column           | Data Type        | Description |
| ---------------- | ---------------- | ----------- |
| index            | integer          | generated by PG when adding rows to database |
| i                | double precision |
| v                | double precision |
| ah_c             | double precision |
| ah_d             | double precision |
| e_c              | double precision |
| e_d              | double precision |
| env_temperature  | double precision |
| cell_temperature | double precision |
| cycle_time       | double precision |
| date_time        | timestamp without time zone |
| cycle_index      | integer |
| test_time        | double precision |
| cell_id          | text          | 
| w | double_precision | power |
| component_level  | text | denotes whether row corresponds to a 'cell' or 'stack' |

## Table: Module Metadata 
### Purpose: Contains metadata for li-ion modules.
| Column           | Data Type        | Description | Options |
| ---------------- | ---------------- | ----------- | ------- |
| index            | integer          | generated by PG when adding rows to database |
| module_id        | text             | unique id for each module |
| configuration    | text             | parallel 'P' or series 'S' configuration |
| num_parallel     | integer          | number of parallel cells |
| num_series       | integer          | number of series cells |
| status           | text             | status of import | new, buffering, processing, completed |

## Table: Stack Metadata 
### Purpose: Contains metadata for flow stacks.
| Column           | Data Type        | Description | Options |
| ---------------- | ---------------- | ----------- | ------- |
| index            | integer          | generated by PG when adding rows to database |
| stack_id         | text             | unique id for each stack | 
| num_series       | integer          | number of cells in the stack |
| status           | text             | status of import | new, buffering, processing, completed |


```python

```
